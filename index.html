<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google Analytics (DO NOT MODIFY) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-97N6TGY3J4"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-97N6TGY3J4');
  </script>

  <meta charset="UTF-8">
  <title>Search Intent Mismatch Checker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    * { box-sizing: border-box; }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
      background: #f9fafb;
      margin: 0;
      color: #111827;
    }

    .container {
      max-width: 900px;
      margin: 60px auto;
      background: #ffffff;
      padding: 36px;
      border-radius: 14px;
      box-shadow: 0 12px 30px rgba(0,0,0,0.06);
    }

    h1 {
      margin-bottom: 6px;
      font-size: 30px;
    }

    .subtitle {
      color: #6b7280;
      margin-bottom: 32px;
      font-size: 16px;
    }

    label {
      font-weight: 600;
      display: block;
      margin-top: 20px;
    }

    input, textarea {
      width: 100%;
      padding: 14px;
      margin-top: 8px;
      font-size: 15px;
      border-radius: 8px;
      border: 1px solid #d1d5db;
    }

    textarea {
      min-height: 160px;
      resize: vertical;
    }

    button {
      margin-top: 28px;
      padding: 14px;
      font-size: 16px;
      font-weight: 600;
      border-radius: 10px;
      border: none;
      background: #2563eb;
      color: white;
      cursor: pointer;
    }

    button:disabled {
      background: #93c5fd;
      cursor: not-allowed;
    }

    .result {
      margin-top: 36px;
      padding: 24px;
      border-radius: 12px;
      line-height: 1.6;
    }

    .match {
      background: #ecfdf5;
      border: 1px solid #10b981;
    }

    .partial {
      background: #fffbeb;
      border: 1px solid #f59e0b;
    }

    .mismatch {
      background: #fef2f2;
      border: 1px solid #ef4444;
    }

    .badge {
      display: inline-block;
      padding: 6px 12px;
      border-radius: 999px;
      font-size: 14px;
      font-weight: 600;
    }

    .informational { background: #e0f2fe; color: #0369a1; }
    .commercial { background: #fef3c7; color: #92400e; }
    .transactional { background: #ede9fe; color: #5b21b6; }

    .high { color: #059669; }
    .medium { color: #d97706; }
    .low { color: #dc2626; }

    footer {
      margin-top: 48px;
      padding-top: 16px;
      border-top: 1px solid #e5e7eb;
      font-size: 14px;
      color: #6b7280;
    }
  </style>
</head>

<body>
<div class="container">

  <h1>Search Intent Mismatch Checker</h1>
  <div class="subtitle">
    Check whether your page content aligns with the real search intent behind a keyword.
  </div>

  <label>
    Target Keyword
    <input id="keyword" placeholder="e.g. why invest in land">
  </label>

  <label>
    Page Content
    <textarea id="content" placeholder="Paste your page content here..."></textarea>
  </label>

  <button id="analyzeBtn">Analyze Intent</button>

  <div id="output"></div>

  <footer>
    Built for SEO professionals.  
    No data is stored. All analysis runs locally in your browser.
  </footer>

</div>

<script>
/* =========================
   CORE LOGIC (SAFE VERSION)
   ========================= */

document.getElementById("analyzeBtn").addEventListener("click", analyze);

function analyze() {
  const output = document.getElementById("output");
  const button = document.getElementById("analyzeBtn");

  button.disabled = true;
  button.textContent = "Analyzing...";
  output.innerHTML = "";

  const keyword = document.getElementById("keyword").value.toLowerCase().trim();
  const contentRaw = document.getElementById("content").value;
  const content = contentRaw.toLowerCase().slice(0, 6000);

  if (!keyword || !content) {
    output.innerHTML = "<p>Please enter both keyword and page content.</p>";
    resetButton(button);
    return;
  }

  const keywordData = detectKeywordIntent(keyword);
  const pageData = detectPageIntent(content);
  const verdict = getVerdict(keywordData.intent, pageData.intent);
  const confidence = getConfidence(keywordData, pageData);
  const fixes = getFixes(keywordData.intent, pageData.intent);

  output.innerHTML = `
    <div class="result ${verdict.class}">
      <h2>
        ${verdict.label} â€”
        <span class="${confidence.toLowerCase()}">${confidence} Confidence</span>
      </h2>

      <p><strong>Keyword Intent:</strong>
        <span class="badge ${keywordData.intent.toLowerCase()}">${keywordData.intent}</span>
      </p>
      <ul>${keywordData.reasons.map(r => `<li>${r}</li>`).join("")}</ul>

      <p><strong>Page Intent:</strong>
        <span class="badge ${pageData.intent.toLowerCase()}">${pageData.intent}</span>
      </p>
      <ul>${pageData.reasons.map(r => `<li>${r}</li>`).join("")}</ul>

      <h3>How to Fix This</h3>
      <ul>${fixes.map(f => `<li>${f}</li>`).join("")}</ul>
    </div>
  `;

  resetButton(button);
}

function resetButton(btn) {
  btn.disabled = false;
  btn.textContent = "Analyze Intent";
}

/* =========================
   INTENT DETECTION
   ========================= */

function detectKeywordIntent(keyword) {
  const transactional = ["buy","pricing","price","cost","sign up","download","trial"];
  const commercial = ["best","top","vs","compare","comparison","tools","software","review","benefits"];

  for (let w of transactional) {
    if (keyword.includes(w)) return { intent: "Transactional", reasons: ["Transactional modifier detected"] };
  }

  for (let w of commercial) {
    if (keyword.includes(w)) return { intent: "Commercial", reasons: ["Commercial modifier detected"] };
  }

  return { intent: "Informational", reasons: ["No buying or comparison modifiers found"] };
}

function detectPageIntent(content) {
  const transactional = ["buy","pricing","sign up","get started","money-back","order"];
  const commercial = ["compare","best","vs","alternatives","features","benefits","reviews"];

  for (let w of transactional) {
    if (content.includes(w)) return { intent: "Transactional", reasons: ["Transactional language detected"] };
  }

  for (let w of commercial) {
    if (content.includes(w)) return { intent: "Commercial", reasons: ["Evaluation or comparison language detected"] };
  }

  return { intent: "Informational", reasons: ["Content is primarily educational"] };
}

function getVerdict(k, p) {
  if (k === p) return { label: "ðŸŸ¢ Intent Match", class: "match" };
  if (k === "Informational" || k === "Transactional") {
    return { label: "ðŸ”´ Strong Mismatch", class: "mismatch" };
  }
  return { label: "ðŸŸ¡ Partial Mismatch", class: "partial" };
}

function getFixes(k, p) {
  if (k === p) return ["Your content already matches the search intent."];

  if (k === "Informational") {
    return [
      "Remove pricing and sales language",
      "Focus on explanations and education",
      "Add FAQs and examples"
    ];
  }

  if (k === "Commercial") {
    return [
      "Add comparisons and benefits",
      "Mention alternatives or options",
      "Reduce direct selling"
    ];
  }

  return [
    "Add pricing or offers",
    "Use strong CTAs",
    "Optimize for conversion"
  ];
}

function getConfidence(kd, pd) {
  let score = kd.reasons.length + pd.reasons.length;
  if (kd.intent === "Transactional" || pd.intent === "Transactional") score++;
  if (score >= 3) return "High";
  if (score === 2) return "Medium";
  return "Low";
}
</script>

</body>
</html>
